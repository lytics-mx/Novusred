<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="lg_products_page" name="LG Products">
        <t t-call="website.layout">
            <div id="wrap" class="js_sale">
                <div class="oe_structure"/>
                <div class="container-fluid mt-4">
                    <div class="row">
                        <!-- Barra lateral izquierda -->
                        <div class="col-lg-3 col-md-4">
                            <div class="list-group">
                                <a href="#" class="list-group-item list-group-item-action">Inicio</a>
                                <a href="#" class="list-group-item list-group-item-action">Oferta</a>
                                <a href="#" class="list-group-item list-group-item-action">Nuevo</a>
                                <a href="#" class="list-group-item list-group-item-action">Descubre</a>
                            </div>

                            <!-- Productos HIKVISION -->
                            <div class="container mt-4">
                                <div style="text-align: left;">
                                    <h2 style="font-family: 'Questrial', sans-serif; font-size: 25px;">HIKVISION</h2>
                                </div>
                                <div class="o_wsale_products_grid_table_wrapper pt-3 pt-lg-0">
                                    <section id="o_wsale_products_grid" class="o_wsale_products_grid_table grid">
                                        <!-- Obtener productos de HIKVISION -->
                                        <t t-set="hikvision_products" t-value="request.env['product.template'].sudo().search([
                                            ('website_published', '=', True),
                                            ('brand_type_id.name', '=', 'HIKVISION')
                                        ], limit=10)" />
                                        <t t-foreach="hikvision_products" t-as="product">
                                            <div class="oe_product g-col-6 g-col-md-3 g-col-lg-3" style="--o-wsale-products-grid-product-col-height: 1" data-name="Producto">
                                                <div class="o_wsale_product_grid_wrapper position-relative h-100 o_wsale_product_grid_wrapper_1_1">
                                                    <form action="/shop/cart/update" method="post" class="oe_product_cart h-100 d-flex" itemscope="itemscope" itemtype="http://schema.org/Product">
                                                        <!-- Imagen del producto -->
                                                        <div class="oe_product_image position-relative flex-grow-0 overflow-hidden">
                                                            <a class="oe_product_image_link d-block position-relative" itemprop="url" t-att-href="'/shop/product/' + str(product.id)">
                                                                <span class="oe_product_image_img_wrapper d-flex h-100 justify-content-center align-items-center position-absolute">
                                                                    <img t-att-src="'/web/image/product.template/' + str(product.id) + '/image_1920'" 
                                                                        itemprop="image" 
                                                                        class="img img-fluid h-100 w-100 position-absolute" 
                                                                        t-att-alt="product.name" 
                                                                        loading="lazy" />
                                                                </span>
                                                            </a>
                                                        </div>
                                                        <!-- Información del producto -->
                                                        <div class="o_wsale_product_information position-relative d-flex flex-column flex-grow-1 flex-shrink-1">
                                                            <div class="o_wsale_product_information_text">
                                                                <h6 class="o_wsale_products_item_title mb-2 text-break">
                                                                    <a class="text-primary text-decoration-none text-primary-emphasis" itemprop="name" t-att-href="'/shop/product/' + str(product.id)">
                                                                        <t t-esc="product.name" />
                                                                    </a>
                                                                </h6>
                                                            </div>
                                                            <div class="o_wsale_product_sub d-flex justify-content-between align-items-end gap-2 flex-wrap">
                                                                <div class="product_price" itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer">
                                                                    <span class="h6 mb-0">$<t t-esc="'%.2f' % product.list_price" /></span>
                                                                    <span itemprop="price" style="display:none;"><t t-esc="product.list_price" /></span>
                                                                    <span itemprop="priceCurrency" style="display:none;">MXN</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </t>
                                    </section>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Contenido principal -->
                        <div class="col-lg-9 col-md-8">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h2 style="font-family: 'Questrial', sans-serif; font-size: 25px;">LG</h2>
                                <!-- Botones para cambiar vista -->
                                <div class="btn-group">
                                    <button class="btn btn-outline-secondary" data-view="grid" t-att-class="request.params.get('view') == 'grid' and 'active'">
                                        <i class="fa fa-th-large"/>
                                    </button>
                                    <button class="btn btn-outline-secondary" data-view="list" t-att-class="request.params.get('view') == 'list' and 'active'">
                                        <i class="fa fa-list"/>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="o_wsale_products_grid_table_wrapper">
                                <section id="o_wsale_products_grid" class="o_wsale_products_grid_table">
                                    <t t-set="ppg" t-value="20"/>
                                    <t t-set="total_count" t-value="request.env['product.template'].sudo().search_count([
                                        ('website_published', '=', True),
                                        ('brand_type_id.name', '=', 'LG')
                                    ])" />
                                    <t t-set="pager" t-value="request.website.pager(
                                        url='/shop/lg',
                                        total=total_count,
                                        page=page,
                                        step=ppg
                                    )" />
                                    
                                    <t t-set="lg_products" t-value="request.env['product.template'].sudo().search([
                                        ('website_published', '=', True),
                                        ('brand_type_id.name', '=', 'LG')
                                    ], limit=pager['step'], offset=(pager['page'] - 1) * pager['step'])" />
                                    
                                    <!-- Vista Grid -->
                                    <div t-if="request.params.get('view') == 'grid' or not request.params.get('view')" class="products-grid row">
                                        <t t-foreach="lg_products" t-as="product">
                                            <div class="col-12 col-sm-6 col-lg-4 mb-3">
                                                <div class="card h-100">
                                                    <a t-att-href="'/shop/product/' + str(product.id)">
                                                        <img t-att-src="'/web/image/product.template/' + str(product.id) + '/image_1920'" 
                                                             class="card-img-top" t-att-alt="product.name"/>
                                                    </a>
                                                    <div class="card-body">
                                                        <h5 class="card-title">
                                                            <t t-esc="product.name"/>
                                                        </h5>
                                                        <p class="card-text">
                                                            $<t t-esc="'%.2f' % product.list_price"/>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                    
                                    <!-- Vista List -->
                                    <div t-if="request.params.get('view') == 'list'" class="products-list">
                                        <t t-foreach="lg_products" t-as="product">
                                            <div class="product-item d-flex mb-3">
                                                <a t-att-href="'/shop/product/' + str(product.id)" class="me-3">
                                                    <img t-att-src="'/web/image/product.template/' + str(product.id) + '/image_1920'" 
                                                         class="img-thumbnail" t-att-alt="product.name" style="width: 100px; height: auto;"/>
                                                </a>
                                                <div>
                                                    <h5>
                                                        <a t-att-href="'/shop/product/' + str(product.id)">
                                                            <t t-esc="product.name"/>
                                                        </a>
                                                    </h5>
                                                    <p class="mb-0">
                                                        $<t t-esc="'%.2f' % product.list_price"/>
                                                    </p>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                    
                                    <!-- Paginación -->
                                    <div class="d-flex justify-content-center mt-4">
                                        <t t-call="website.pager" t-options="{'pager': pager}"/>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </div>
        </t>
    </template>
</odoo>