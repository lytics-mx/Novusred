<odoo>
    <template id="website_signup" name="Registro">
        <t t-call="website.layout">
            <div id="wrap" style="background:#ededed;min-height:100vh;">
                <div class="container py-5 d-flex flex-column align-items-center" style="min-height:80vh;">
                    <h2 class="mb-4 text-start" style="font-size:20px;">Ingresa tu información</h2>
                    <div class="card shadow-sm p-4 mb-4" style="width:100%;max-width:900px;background:#fff;">
                        <form t-att-action="'/user_record'" method="post" autocomplete="off" id="registration_form">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="name">Nombre</label>
                                    <input type="text" id="name" name="name" class="form-control" required="required" style="border:1.5px solid #6ea8fe;background-color:transparent;" />
                                    <small class="text-muted">Solo se permiten caracteres alfabéticos (letras) y el punto (.), seguidos de un espacio.</small>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="last_name">Apellidos</label>
                                    <input type="text" id="last_name" name="last_name" class="form-control" required="required" style="border:1.5px solid #6ea8fe;background-color:transparent;" />
                                    <small class="text-muted">Solo se permiten caracteres alfabéticos (letras) y el punto (.), seguidos de un espacio.</small>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="login">Correo electronico</label>
                                    <input type="email" id="login" name="login" class="form-control" required="required" style="border:1.5px solid #6ea8fe;background-color:transparent;" />
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="password">Contraseña</label>
                                    <input type="password" id="password" name="password" class="form-control" required="required" minlength="6" style="border:1.5px solid #6ea8fe;background-color:transparent;" />
                                    <small class="text-muted">La contraseña debe tener un mínimo de 6 caracteres</small>
                                </div>
                            </div>
                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="accept_terms" name="accept_terms" required="required" style="width:22px;height:22px;" title="Debes aceptar los términos y condiciones para continuar." />
                                <label class="form-check-label ms-2" for="accept_terms" style="font-size:14px;">
                                    Acepto las condiciones generales y la política de confidencialidad
                                </label>
                            </div>
                            <div class="d-flex justify-content-center">
                                <button type="submit" class="btn" style="background:#388bff;color:#fff;font-size:18px;padding:10px 60px;border-radius:10px;">Crear</button>
                            </div>
                            <script>
                                document.getElementById('registration_form').addEventListener('submit', function(event) {
                                    event.preventDefault(); // Evita el comportamiento predeterminado
                                    const form = event.target;

                                    // Realiza la solicitud POST
                                    fetch(form.action, {
                                        method: form.method,
                                        body: new FormData(form),
                                    })
                                    .then(response => {
                                        if (response.ok) {
                                            // Mostrar notificación de éxito centrada y visible por más tiempo
                                            const notification = document.createElement('div');
                                            notification.textContent = '¡Registro exitoso!';
                                            notification.style.position = 'fixed';
                                            notification.style.top = '50%';
                                            notification.style.left = '50%';
                                            notification.style.transform = 'translate(-50%, -50%)';
                                            notification.style.backgroundColor = '#4caf50';
                                            notification.style.color = '#fff';
                                            notification.style.padding = '20px 40px';
                                            notification.style.fontSize = '20px';
                                            notification.style.borderRadius = '10px';
                                            notification.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.3)';
                                            notification.style.zIndex = '9999';
                                            document.body.appendChild(notification);

                                            // Ocultar notificación después de 5 segundos y luego redirigir
                                            setTimeout(() => {
                                                notification.remove();
                                                // Redirige al usuario al login después de que desaparece la notificación
                                                window.location.href = '/web/login';
                                            }, 5000);

                                        } else {
                                            alert('Hubo un error al procesar el formulario.');
                                        }
                                    })
                                    .catch(error => {
                                        console.error('Error:', error);
                                        alert('Hubo un error al procesar el formulario.');
                                    });
                                });
                            </script>                            
                        </form>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>