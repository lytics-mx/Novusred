<odoo>
    <template id="website_subcategory" name="Subcategorías">
        <t t-call="website.layout">
            <div class="container mt-4">
                <!-- Sección de encabezado con texto e íconos -->
                <div class="d-flex align-items-center justify-content-between p-4 mb-4" style="background-color: #fff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-top: -32px; margin-bottom: 24px; width: 100vw; position: relative; left: 50%; transform: translateX(-50%);">
                    <!-- Navigation breadcrumb -->
                    <div class="d-none d-md-flex align-items-center" style="flex: 1;">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item">
                                    <a href="/shop" style="color: #6c757d; text-decoration: none;">Tienda</a>
                                </li>
                                <t t-if="selected_category">
                                    <t t-foreach="selected_category.parent_id" t-as="parent">
                                        <li class="breadcrumb-item">
                                            <a t-att-href="'/subcategory?category_id=%s' % parent.id" 
                                               style="color: #6c757d; text-decoration: none;">
                                                <t t-esc="parent.name"/>
                                            </a>
                                        </li>
                                    </t>
                                    <li class="breadcrumb-item active" aria-current="page">
                                        <span style="color: #6c757d;">
                                            <t t-esc="selected_category.name"/>
                                        </span>
                                    </li>
                                </t>
                            </ol>
                        </nav>
                    </div>

                    <!-- Category title and counter -->
                    <div class="text-center" style="flex: 1;">
                        <h2 class="mb-1" style="font-family: 'Questrial', sans-serif; font-size: 28px; font-weight: bold; letter-spacing: 0.5px;">
                            <t t-if="selected_category" t-esc="selected_category.name"/>
                            <t t-else="">Todas las categorías</t>
                        </h2>
                        <p class="mb-0" style="font-size: 14px; color: #6c757d;">
                            <t t-esc="product_count"/> productos disponibles
                        </p>
                    </div>

                    <!-- Category filters -->
                    <div class="d-flex align-items-center" style="flex: 1; justify-content: flex-end;">
                        <div class="tags-container">
                            <div class="tags-wrapper">
                                <t t-foreach="categories" t-as="cat">
                                    <a t-att-href="'/subcategory?category_id=%s' % cat.id" 
                                       class="tag-item clickable-tag">
                                        <div class="tag-icon-container" t-if="cat.image_1920">
                                            <img t-att-src="'/web/image/product.category/%s/image_1920' % cat.id"
                                                 t-att-alt="cat.name"
                                                 class="tag-icon"/>
                                        </div>
                                        <div class="tag-name">
                                            <t t-esc="cat.name"/>
                                        </div>
                                        <div class="tag-underline"></div>
                                    </a>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ...existing code... -->

                <!-- Categorías -->
                <div class="mb-3">
                    <h6 style="font-size: 14px; color: #333; margin-bottom: 8px; font-family: 'Questrial', sans-serif;">Categorías</h6>
                    <div class="mobile-categories-grid">
                        <t t-foreach="categories" t-as="cat">
                            <a t-att-href="'/subcategory?category_id=%s%s' % (cat.id, '&amp;free_shipping=true' if current_filters['free_shipping'] else '')" 
                               class="btn btn-sm btn-outline-secondary mb-2" style="font-size: 12px; padding: 4px 8px; font-family: 'Questrial', sans-serif;">
                                <span t-esc="cat.name"/> (<span t-esc="len(cat.product_tmpl_ids)"/>)
                            </a>
                        </t>
                    </div>
                </div>

                <!-- ...existing code... -->

                <!-- Categorías -->
                <div class="mb-3">
                    <h5>Categorías</h5>
                    <ul class="list-unstyled">
                        <t t-foreach="categories" t-as="cat">
                            <li>
                                <a t-att-href="'/subcategory?category_id=%s%s' % (cat.id, '&amp;free_shipping=true' if current_filters['free_shipping'] else '')" style="color: #848484;">
                                    <span t-esc="cat.name"/> (<span t-esc="len(cat.product_tmpl_ids)"/>)
                                </a>
                            </li>
                        </t>
                    </ul>
                </div>

                <!-- ...existing code... -->

                <!-- Actualizar URLs de filtros para usar el controlador correcto -->
                <form method="get" action="/subcategory">
                    <div class="d-flex align-items-center">
                        <input type="number" class="form-control me-2 bg-white" id="minPrice" name="min_price" placeholder="Desde" style="background-color: #ffffff;" />
                        <span class="me-2">—</span>
                        <input type="number" class="form-control me-2 bg-white" id="maxPrice" name="max_price" placeholder="Hasta" style="background-color: #ffffff;" />
                        <!-- Mantener filtros actuales -->
                        <t t-if="current_filters['category_id']">
                            <input type="hidden" name="category_id" t-att-value="current_filters['category_id']"/>
                        </t>
                        <t t-if="current_filters['free_shipping']">
                            <input type="hidden" name="free_shipping" value="true"/>
                        </t>
                        <button type="submit" class="btn" style="background-color: #5a5a5a; color: white;">Buscar</button>
                    </div>
                </form>

                <!-- ...existing code... -->
            </div>
        </t>
    </template>
</odoo>